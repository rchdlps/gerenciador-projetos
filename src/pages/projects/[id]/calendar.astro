---
import DashboardLayout from "@/layouts/DashboardLayout.astro";
import { CalendarPage } from "@/components/calendar/calendar-page";
import { getPageContext } from "@/lib/queries/page-context";

const ctx = await getPageContext(Astro.request.headers);
if (!ctx) return Astro.redirect("/login");

const { id } = Astro.params;
if (!id) return Astro.redirect("/");
---

<DashboardLayout
    title="Calendário do Projeto"
    session={ctx.session}
    orgSessionData={ctx.orgSessionData}
>
    <div class="space-y-6 animate-in fade-in duration-500">
        <div class="flex items-center justify-between">
            <div>
                <h2 class="text-3xl font-bold tracking-tight">
                    Calendário do Projeto
                </h2>
                <p class="text-muted-foreground">
                    Visualize e gerencie os prazos das tarefas.
                </p>
            </div>
        </div>

        <CalendarPage client:visible projectId={id!} />
    </div>
</DashboardLayout>
